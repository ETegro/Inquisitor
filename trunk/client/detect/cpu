#!/bin/sh

MAX_PHIS_ID=`cat /proc/cpuinfo  | sed -n 's/physical id.*: //p' | sort -n | tail -n1`
CPU_INFO=`grep -A4 'processor.*: 0' /proc/cpuinfo`
CPU_VENDOR=`echo "$CPU_INFO" | sed -n 's/vendor_id.*: //p' | sed 's/Genuine//g;s/Authentic//g;'`
CPU_MODEL=`echo "$CPU_INFO" | sed -n 's/model name.*: //p' | sed 's/(R)//g;s/(tm)//g;s/processor//ig;s/CPU//g;s/Intel//g;s/AMD//g;s/Genuine/Core Solo/;s/@ //;s/  */ /g;s/^ *//g;'`

if [ -z "$MAX_PHIS_ID" ]; then
	MAX_PHIS_ID=0
fi

for I in `seq 0 $MAX_PHIS_ID`; do
	$SHARE_DIR/add-component CPU "$CPU_VENDOR" "$CPU_MODEL" ''
done
